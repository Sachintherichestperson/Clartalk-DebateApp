const otpInputs=document.querySelectorAll(".otp-input");otpInputs.forEach((input,index)=>{input.addEventListener("input",e=>{if(e.target.value.length===1){if(index<otpInputs.length-1){otpInputs[index+1].focus()}}});input.addEventListener("keydown",e=>{if(e.key==="Backspace"&&input.value===""){if(index>0){otpInputs[index-1].focus()}}})});document.getElementById("otpForm").addEventListener("submit",async function(event){event.preventDefault();const otpInputs=document.querySelectorAll(".otp-input");const otp=Array.from(otpInputs).map(input=>input.value).join("");const response=await fetch("/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:otp})});const data=await response.json();if(data.success){window.location.href=data.redirectUrl}else{alert(data.error);otpInputs.forEach(input=>input.value="");otpInputs[0].focus()}});document.getElementById("resendOtp").addEventListener("click",async function(){const response=await fetch("/resend-otp",{method:"POST",headers:{"Content-Type":"application/json"}});const data=await response.json();if(data.success){document.getElementById("resendMsg").style.display="block"}else{document.getElementById("resendMsg").innerText=data.error}});