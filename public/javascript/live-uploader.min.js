document.addEventListener("DOMContentLoaded",()=>{const radioButtons=document.querySelectorAll('input[type="radio"]');radioButtons.forEach(radio=>{radio.addEventListener("click",function(event){if(this.dataset.checked==="true"){this.checked=false;this.dataset.checked="false"}else{this.dataset.checked="true"}radioButtons.forEach(otherRadio=>{if(otherRadio!==this){otherRadio.dataset.checked="false"}})})})});
        const input = document.getElementById("username-input");
        const suggestionsBox = document.getElementById("suggestions-box");
      
        input.addEventListener("input", function () {
          const query = this.value.trim();
      
          if (!query) {
            suggestionsBox.innerHTML = "";
            suggestionsBox.style.display = "none";
            return;
          }
      
          fetch(`/creator/search-users?query=${query}`)
            .then(res => res.json())
            .then(usernames => {
              suggestionsBox.innerHTML = "";
              if (usernames.length === 0) {
                suggestionsBox.style.display = "none";
                return;
              }
      
              usernames.forEach(username => {
                const div = document.createElement("div");
                div.style.backgroundColor = "rgb(51 51 51)";
                div.style.color = "rgb(117 117 117)";
                div.textContent = username;
                div.style.padding = "8px";
                div.style.cursor = "pointer";
                div.style.borderBottom = "1px solid #eee";
                div.addEventListener("click", () => {
                  input.value = username;
                  suggestionsBox.style.display = "none";
                });
                suggestionsBox.appendChild(div);
              });
      
              const inputRect = input.getBoundingClientRect();
              suggestionsBox.style.display = "block";
              suggestionsBox.style.width = input.offsetWidth + "px";
              suggestionsBox.style.top = input.offsetTop + input.offsetHeight + "px";
              suggestionsBox.style.left = input.offsetLeft + "px";
            })
            .catch(err => console.error("Error fetching users:", err));
        });
      
        document.addEventListener("click", function (e) {
          if (!suggestionsBox.contains(e.target) && e.target !== input) {
            suggestionsBox.style.display = "none";
          }
        });